var a=(a,e,s)=>new Promise((t,n)=>{var l=a=>{try{r(s.next(a))}catch(e){n(e)}},c=a=>{try{r(s.throw(a))}catch(e){n(e)}},r=a=>a.done?t(a.value):Promise.resolve(a.value).then(l,c);r((s=s.apply(a,e)).next())});import{R as e,j as s,V as t,T as n,S as l}from"./vendors.680e87f1.js";import{w as c,u as r,C as d,a as o,A as i}from"./common.5398e15f.js";const m=()=>{const{t:c}=r(),[m,p]=e.useState({total:0,pending:0,confirmed:0,in_progress:0,completed:0,cancelled:0,broken:0}),[h,x]=e.useState([]),j=()=>a(void 0,null,function*(){try{const a=yield o({url:i.APPOINTMENT_STATS_TODAY_URL,method:"GET"});console.log("databoard.tsx -> loadTodayStats -> response",a.data),a.data.success&&p(a.data.data)}catch(a){console.error("\u52a0\u8f7d\u4eca\u65e5\u7edf\u8ba1\u6570\u636e\u5931\u8d25:",a)}}),N=()=>a(void 0,null,function*(){try{const a=yield o({url:i.APPOINTMENT_TODAY_NEW_URL,method:"GET"});console.log("databoard.tsx -> loadTodayNewAppointments -> response",a.data),a.data.success&&x(a.data.data)}catch(a){console.error("\u52a0\u8f7d\u4eca\u65e5\u7edf\u8ba1\u6570\u636e\u5931\u8d25:",a)}});return e.useEffect(()=>{j(),N();const a=setInterval(N,5e3);return()=>{clearInterval(a)}},[]),s.jsxs(t,{className:"layout page-databoard",children:[s.jsx(d,{title:c("nav.databoard")}),s.jsx(t,{className:"container",children:s.jsxs(t,{className:"content-container",children:[s.jsxs(t,{className:"data-row card",children:[s.jsx(t,{className:"data-row-title card",children:s.jsx(n,{children:c("databoard.today_data")})}),s.jsxs(t,{className:"card",children:[s.jsx(n,{className:"title",children:c("databoard.total")}),s.jsx(n,{className:"value",children:m.total})]}),s.jsxs(t,{className:"card",children:[s.jsx(n,{className:"title",children:c("databoard.pending")}),s.jsx(n,{className:"value pending",children:m.pending})]}),s.jsxs(t,{className:"card",children:[s.jsx(n,{className:"title",children:c("databoard.confirmed")}),s.jsx(n,{className:"value confirmed",children:m.confirmed})]}),s.jsxs(t,{className:"card",children:[s.jsx(n,{className:"title",children:c("databoard.in_progress")}),s.jsx(n,{className:"value in-progress",children:m.in_progress})]}),s.jsxs(t,{className:"card",children:[s.jsx(n,{className:"title",children:c("databoard.completed")}),s.jsx(n,{className:"value completed",children:m.completed})]}),s.jsxs(t,{className:"card",children:[s.jsx(n,{className:"title",children:c("databoard.broken")}),s.jsx(n,{className:"value broken",children:m.broken})]}),s.jsxs(t,{className:"card",children:[s.jsx(n,{className:"title",children:c("databoard.cancelled")}),s.jsx(n,{className:"value cancelled",children:m.cancelled})]})]}),s.jsxs(t,{className:"appointment-list databoard",children:[s.jsx(t,{className:"appointment-list-title",children:s.jsx(n,{children:c("databoard.recent_appointments")})}),0===h.length?s.jsx(t,{className:"no-appointments",children:s.jsx(n,{children:c("databoard.no_recent_appointments")})}):s.jsx(l,{className:"appointment-scroll",scrollY:!0,children:h.map(a=>s.jsxs(t,{className:"appointment-item",children:[s.jsxs(t,{className:"appointment-header",children:[s.jsxs(n,{className:"appointment-no",children:["#",a.appointment_no]}),s.jsx(n,{className:`appointment-status ${a.status}`,children:c(`appointment_status.${a.status}`)})]}),s.jsxs(t,{className:"appointment-info",children:[s.jsx(n,{className:"customer-name",children:a.customer_name}),s.jsx(n,{className:"customer-phone",children:a.customer_phone})]}),s.jsxs(t,{className:"appointment-details",children:[s.jsx(n,{className:"service-type",children:a.service_name}),s.jsx(n,{className:"appointment-time",children:a.appointment_time})]})]},a._id))})]})]})})]})},p=c(m);export{p as default};
