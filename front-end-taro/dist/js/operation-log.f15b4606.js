var a=(a,e,t)=>new Promise((s,n)=>{var o=a=>{try{r(t.next(a))}catch(e){n(e)}},l=a=>{try{r(t.throw(a))}catch(e){n(e)}},r=a=>a.done?s(a.value):Promise.resolve(a.value).then(o,l);r((t=t.apply(a,e)).next())});import{R as e,j as t,V as s,S as n,T as o,v as l}from"./vendors.680e87f1.js";import{w as r,u as i,C as c,a as p,A as d}from"./common.36ec653b.js";const m=()=>{const{t:r}=i(),[m,g]=e.useState([]),[_,u]=e.useState(!1),h=()=>a(void 0,null,function*(){u(!0);try{const a=yield p({url:d.OPERATION_LOGS_URL,method:"GET"});a.data.success&&g(a.data.data.logs||[])}catch(a){l({title:r("operation_log.loadFailed"),icon:"error"})}finally{u(!1)}}),j=a=>{const e={create_appointment:r("operation_log.create_appointment"),update_status:r("operation_log.update_status"),scan_signin:r("operation_log.scan_signin"),manual_signin:r("operation_log.manual_signin"),cancel_appointment:r("operation_log.cancel_appointment")};return e[a]||a},x=a=>{const e=new Date(a);return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`},N=a=>{const e={pending:r("appointment_status.pending"),confirmed:r("appointment_status.confirmed"),in_progress:r("appointment_status.in_progress"),completed:r("appointment_status.completed"),cancelled:r("appointment_status.cancelled"),broken:r("appointment_status.broken")};return e[a]||a};return e.useEffect(()=>{h()},[]),t.jsxs(s,{className:"layout page-log",children:[t.jsx(c,{title:r("operation_log.title")}),t.jsx(s,{className:"container",children:t.jsxs(s,{className:"content-container",children:[t.jsx(n,{className:"log-list",scrollY:!0,children:m.map(a=>t.jsxs(s,{className:"log-card card",children:[t.jsxs(s,{className:"log-header",children:[t.jsx(o,{className:"log-type",children:j(a.operation_type)}),t.jsx(o,{className:"log-time",children:x(a.operation_time)})]}),t.jsxs(s,{className:"log-content",children:[t.jsxs(s,{className:"log-row",children:[t.jsxs(o,{className:"label",children:[r("operation_log.operator"),":"]}),t.jsx(o,{className:"value",children:a.operator})]}),a.target_appointment_no&&t.jsxs(s,{className:"log-row",children:[t.jsxs(o,{className:"label",children:[r("operation_log.appointment_no"),":"]}),t.jsxs(o,{className:"value",children:["#",a.target_appointment_no]})]}),a.old_status&&a.new_status&&t.jsxs(s,{className:"log-row",children:[t.jsxs(o,{className:"label",children:[r("operation_log.status_change"),":"]}),t.jsxs(o,{className:"value",children:[N(a.old_status)," \u2192 ",N(a.new_status)]})]}),a.details&&t.jsxs(s,{className:"log-row",children:[t.jsxs(o,{className:"label",children:[r("operation_log.details"),":"]}),t.jsx(o,{className:"value",children:a.details})]})]})]},a._id))}),_&&t.jsx(s,{className:"loading",children:t.jsx(o,{children:r("common.loading")})}),!_&&0===m.length&&t.jsx(s,{className:"empty",children:t.jsx(o,{children:r("operation_log.noData")})})]})})]})},g=r(m);export{g as default};
