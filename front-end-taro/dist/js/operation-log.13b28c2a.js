var e=(e,a,t)=>new Promise((s,n)=>{var o=e=>{try{r(t.next(e))}catch(a){n(a)}},l=e=>{try{r(t.throw(e))}catch(a){n(a)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,l);r((t=t.apply(e,a)).next())});import{R as a,j as t,V as s,S as n,T as o,v as l}from"./vendors.680e87f1.js";import{w as r,u as i,C as c,e as p,A as d}from"./common.91e146f8.js";const m=()=>{const{t:r}=i(),[m,g]=a.useState([]),[_,u]=a.useState(!1),h=()=>e(void 0,null,function*(){u(!0);try{const e=yield p({url:d.OPERATION_LOGS_URL,method:"GET"});e.data.success&&g(e.data.data.logs||[])}catch(e){l({title:r("operation_log.loadFailed"),icon:"error"})}finally{u(!1)}}),j=e=>{const a={create_appointment:r("operation_log.create_appointment"),update_status:r("operation_log.update_status"),scan_signin:r("operation_log.scan_signin"),manual_signin:r("operation_log.manual_signin"),cancel_appointment:r("operation_log.cancel_appointment")};return a[e]||e},x=e=>{const a=new Date(e);return`${a.getFullYear()}-${(a.getMonth()+1).toString().padStart(2,"0")}-${a.getDate().toString().padStart(2,"0")} ${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`},N=e=>{const a={pending:r("appointment_status.pending"),confirmed:r("appointment_status.confirmed"),in_progress:r("appointment_status.in_progress"),completed:r("appointment_status.completed"),cancelled:r("appointment_status.cancelled"),broken:r("appointment_status.broken")};return a[e]||e};return a.useEffect(()=>{h()},[]),t.jsxs(s,{className:"layout page-log",children:[t.jsx(c,{title:r("operation_log.title")}),t.jsx(s,{className:"container",children:t.jsxs(s,{className:"content-container",children:[t.jsx(n,{className:"log-list",scrollY:!0,children:m.map(e=>t.jsxs(s,{className:"log-card card",children:[t.jsxs(s,{className:"log-header",children:[t.jsx(o,{className:"log-type",children:j(e.operation_type)}),t.jsx(o,{className:"log-time",children:x(e.operation_time)})]}),t.jsxs(s,{className:"log-content",children:[t.jsxs(s,{className:"log-row",children:[t.jsxs(o,{className:"label",children:[r("operation_log.operator"),":"]}),t.jsx(o,{className:"value",children:e.operator})]}),e.target_appointment_no&&t.jsxs(s,{className:"log-row",children:[t.jsxs(o,{className:"label",children:[r("operation_log.appointment_no"),":"]}),t.jsxs(o,{className:"value",children:["#",e.target_appointment_no]})]}),e.old_status&&e.new_status&&t.jsxs(s,{className:"log-row",children:[t.jsxs(o,{className:"label",children:[r("operation_log.status_change"),":"]}),t.jsxs(o,{className:"value",children:[N(e.old_status)," \u2192 ",N(e.new_status)]})]}),e.details&&t.jsxs(s,{className:"log-row",children:[t.jsxs(o,{className:"label",children:[r("operation_log.details"),":"]}),t.jsx(o,{className:"value",children:e.details})]})]})]},e._id))}),_&&t.jsx(s,{className:"loading",children:t.jsx(o,{children:r("common.loading")})}),!_&&0===m.length&&t.jsx(s,{className:"empty",children:t.jsx(o,{children:r("operation_log.noData")})})]})})]})},g=r(m);export{g as default};
