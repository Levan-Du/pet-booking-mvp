var e=(e,s,a)=>new Promise((t,n)=>{var l=e=>{try{c(a.next(e))}catch(s){n(s)}},o=e=>{try{c(a.throw(e))}catch(s){n(s)}},c=e=>e.done?t(e.value):Promise.resolve(e.value).then(l,o);c((a=a.apply(e,s)).next())});import{R as s,p as a,j as t,V as n,T as l,I as o,B as c,v as r,a as i,t as m}from"./vendors.680e87f1.js";import{C as d,A as u,d as p}from"./common.d767b0fa.js";const h=()=>{const[h,j]=s.useState(""),[x,v]=s.useState(""),[N,f]=s.useState("");s.useEffect(()=>{var e;const s=a(),t=null==(e=s.router)?void 0:e.params.redirect;t&&f(decodeURIComponent(t))},[]);const g=()=>e(void 0,null,function*(){if(h&&x)try{const e=yield i({url:u.AUTH_LOGIN_URL,method:"POST",header:{"Content-Type":"application/json"},data:{username:h,password:x}});if(e.data.success){const s=e.data.data.accessToken;p.setToken(s),r({title:"\u767b\u5f55\u6210\u529f",icon:"success"});const a=setTimeout(()=>{clearTimeout(a),m.navigateTo({url:N||"/pages/management/management"})},100)}else r({title:e.data.message||"\u767b\u5f55\u5931\u8d25",icon:"error"})}catch(e){r({title:"\u7f51\u7edc\u9519\u8bef\uff0c\u8bf7\u91cd\u8bd5",icon:"error"})}else r({title:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\u548c\u5bc6\u7801",icon:"error"})});return t.jsxs(n,{className:"layout page-login",children:[t.jsx(d,{title:"\u7ba1\u7406\u5458\u767b\u5f55",showBack:!1,showMenu:!1}),t.jsx(n,{className:"container",children:t.jsx(n,{className:"content-container",children:t.jsxs(n,{className:"login-form",children:[t.jsx(l,{className:"title",children:"\u7ba1\u7406\u5458\u767b\u5f55"}),t.jsxs(n,{className:"form-item",children:[t.jsx(l,{className:"label",children:"\u7528\u6237\u540d"}),t.jsx(o,{value:h,placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",className:"input",onInput:e=>j(e.detail.value)})]}),t.jsxs(n,{className:"form-item",children:[t.jsx(l,{className:"label",children:"\u5bc6\u7801"}),t.jsx(o,{value:x,placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",type:"password",className:"input",onInput:e=>v(e.detail.value)})]}),t.jsx(c,{onClick:g,className:"login-btn",children:"\u767b\u5f55"})]})})})]})};export{h as default};
