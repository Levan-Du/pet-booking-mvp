<template>
	<view class="container">
		<text class="title">Admin 页面测试</text>
		
		<button @click="goToAdmin" class="test-btn">
			跳转到 Admin 登录页面
		</button>
		
		<button @click="testBackend" class="test-btn">
			测试后端连接
		</button>
		
		<view v-if="testResult" class="result">
			<text>{{ testResult }}</text>
		</view>
	</view>
</template>

<script setup>
	import { ref } from 'vue'
	
	const testResult = ref('')
	
	const goToAdmin = () => {
		uni.navigateTo({
			url: '/pages/admin/admin'
		})
	}
	
	const testBackend = async () => {
		try {
			testResult.value = '正在测试后端连接...'
			
			const response = await uni.request({
				url: 'http://localhost:3000/health',
				method: 'GET',
				timeout: 5000
			})
			
			if (response.statusCode === 200) {
				testResult.value = '✅ 后端连接正常: ' + JSON.stringify(response.data)
			} else {
				testResult.value = '❌ 后端响应异常: ' + response.statusCode
			}
		} catch (error) {
			testResult.value = '❌ 后端连接失败: ' + error.message
			console.error('后端测试失败:', error)
		}
	}
</script>

<style>
	.container {
		padding: 40rpx;
		display: flex;
		flex-direction: column;
		gap: 30rpx;
	}
	
	.title {
		font-size: 36rpx;
		font-weight: bold;
		text-align: center;
		margin-bottom: 40rpx;
	}
	
	.test-btn {
		background-color: #007AFF;
		color: white;
		border: none;
		border-radius: 12rpx;
		padding: 24rpx;
		font-size: 28rpx;
	}
	
	.result {
		background-color: #f5f5f5;
		padding: 20rpx;
		border-radius: 8rpx;
		margin-top: 20rpx;
	}
</style>